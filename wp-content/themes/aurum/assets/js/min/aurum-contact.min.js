var map;!function($,e,a){"use strict";$(document).ready(function(){var a=function(){var e=new google.maps.LatLngBounds,a={zoom:10,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1};$.each(mapChords,function(a,n){var o=n.map_point,t=new google.maps.LatLng(o.lat,o.lng);e.extend(t)}),a.center=e.getCenter(),map=new google.maps.Map(document.getElementById("map"),a),$.each(mapChords,function(e,a){setTimeout(function(){new google.maps.Marker({position:new google.maps.LatLng(a.map_point.lat,a.map_point.lng),map:map,animation:google.maps.Animation.DROP,icon:a.pin_image?a.pin_image:""})},250*e)});var n=[];$.each(mapChords,function(e,a){""!==a.zoom_level&&n.push(parseInt(a.zoom_level,10))}),n.length?map.setZoom(n.reduce(function(e,a){return e+a})/n.length):map.fitBounds(e)};"undefined"!=typeof google&&google.maps.event.addDomListener(e,"load",a),$("#contact-form").on("submit",function(e){e.preventDefault();var a=$(this);if(a.data("is-busy"))return!1;var n=$(this).serializeArray(),o=a.find('input[name="name"]'),t=a.find('input[name="subject"]'),s=a.find('input[name="email"]'),i=a.find('textarea[name="message"]'),r=[];if(a.find(".required").each(function(e,a){var n=$(a);n.removeClass("has-errors"),"email"==n.prop("type")?0!=n.val().trim().length&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n.val())||r.push(n):0==n.val().trim().length&&r.push(n)}),r.length>0)$.each(r,function(e,a){var n=$(a);0==e&&n.focus(),n.addClass("has-errors")});else{a.data("is-busy",!0);var m=a.find(".send-message");m.fadeTo(250,.25),$.post(ajaxurl,{action:"lab_req_contact_token",form_data:{name:o.val(),subject:t.val(),email:s.val(),message:i.val()}},function(e){var o=e.split("_"),t={name:o[0],value:o[1]},s={name:"action",value:"lab_contact_form"};n.push(t),n.push(s),$.post(ajaxurl,n,function(e){e.errors===!1?(a.find("input, textarea").prop("readonly",!0).fadeTo(250,.5),$(".form-success-message").removeClass("hidden").hide().slideDown(),m.fadeTo(250,0)):(a.data("is-busy",!1),alert("An error occured during the verification of the token! Please try again"),m.fadeTo(250,1))},"json")})}})})}(jQuery,window);