/* NM: Add-to-cart script */
(function(c){c.extend(c.nmTheme,{atc_init:function(){this.atcBind()},atcBind:function(){var d=this;d.$body.on("click",".single_add_to_cart_button",function(a){var b=c(this);if(b.hasClass("nm-simple-add-to-cart-button")||b.hasClass("nm-variable-add-to-cart-button"))a.preventDefault(),d.quickviewOpen=d.quickviewIsOpen(),d.quickviewOpen&&b.addClass("nm-loader nm-loader-light"),b.attr("disabled","disabled"),a=b.closest("form"),a.length&&(a={product_id:a.find("input[name*='add-to-cart']").val(),product_variation_data:a.serialize()},
d.$body.trigger("adding_to_cart",[b,a,d.quickviewOpen]),d.atcAjaxSubmitForm(b,a))})},atcAjaxSubmitForm:function(d,a){var b=this;a.product_id?c.ajax({type:"POST",url:"?add-to-cart="+a.product_id+"&nm-ajax-add-to-cart=1",data:a.product_variation_data,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},error:function(b,a,c){console.log("NM: AJAX error - atcAjaxSubmitForm() - "+c)},success:function(a){a=c("<div>"+a+"</div>");var e=a.find("#nm-shop-notices-wrap"),f=e.find(".woocommerce-error").length?
!0:!1,e={".nm-menu-cart-count":a.find(".nm-menu-cart-count"),"#nm-shop-notices-wrap":e,"#nm-mini-cart .widget_shopping_cart_content":a.find("#nm-mini-cart").children(".widget_shopping_cart_content")};c.each(e,function(a,b){b.length&&c(a).replaceWith(b)});b.$body.trigger("added_to_cart",[{},"",b.quickviewOpen]);b.quickviewOpen?(c.magnificPopup.close(),f?b.shopScrollToTop():setTimeout(function(){b.widgetPanelShowCart(!1)},350)):(d.removeAttr("disabled"),f&&setTimeout(function(){c("#nm-widget-panel-overlay").trigger("click");
b.shopScrollToTop()},500));a.empty()}}):console.log("NM (Error): No product id found")}});c.nmThemeExtensions.add_to_cart=c.nmTheme.atc_init})(jQuery);