/* NM: Shop filters scrollbar script */
(function(d){d.extend(d.nmTheme,{filters_scrollbar_init:function(){var b=this;b.isTouchWebKit=b.$html.hasClass("touch")&&"WebkitAppearance"in document.documentElement.style;var f=function(c){var a=this;a.$widget=d(c);a.$widgetWrap=a.$widget.children(".nm-shop-widget-content");a.$widgetScroll=a.$widgetWrap.children(".nm-shop-widget-scroll");a.$widgetScroll[0].scrollHeight>a.$widgetWrap.height()&&(a.$widgetScroll.addClass("scrollable"),b.isTouchWebKit?a.$widgetScroll.addClass("touch-webkit"):a.$widgetScroll.css("margin-right",
"-"+b.scrollbarWidth+"px"),a.$widgetWrap.prepend('<div class="nm-scrollbar"></div>'),a.$scrollbar=a.$widgetWrap.children(".nm-scrollbar"),a.$widgetScroll.on("scroll",function(){a._setPositionHeight()}),a.$scrollbar.on("mousedown",function(c){a._startDrag(c)}),a._setPositionHeight())};f.prototype={_setPositionHeight:function(){var c=this.$widgetScroll[0].scrollHeight,a=this.$widgetScroll.scrollTop(),b=this.$widgetWrap.height(),c=b/c;this.$scrollbar.css({top:Math.round(c*a),height:Math.floor(c*b)})},
_startDrag:function(c){c.preventDefault();var a=this;a.$scrollbar.addClass("dragging");a.dragOffset=c.pageY-a.$scrollbar.offset().top;b.$document.on("mousemove.nmScrollbar",function(b){a._drag(b)});b.$document.on("mouseup.nmScrollbar",function(b){a._endDrag(b)})},_drag:function(b){b.preventDefault();b=(b.pageY-this.$widgetScroll.offset().top-this.dragOffset)/this.$widgetWrap.height()*this.$widgetScroll[0].scrollHeight;this.$widgetScroll.scrollTop(b)},_endDrag:function(){this.$scrollbar.removeClass("dragging");
b.$document.off("mousemove.nmScrollbar");b.$document.off("mouseup.nmScrollbar")}};b.filterScrollbarsInit=function(){"hidden"!=d("#nm-shop-sidebar-layout-indicator").css("overflow")&&(b.filterScrollbarsLoaded=!0,d("#nm-shop-widgets-ul").children("li").each(function(){new f(this)}))};var e=null,g=!1;b.$window.bind("resize.nmScrollbar",function(){e&&clearTimeout(e);e=setTimeout(function(){g=d("#nm-shop-sidebar").hasClass("fade-in");!b.filterScrollbarsLoaded&&g&&b.filterScrollbarsInit()},250)})}});d.nmThemeExtensions.filters_scrollbar=
d.nmTheme.filters_scrollbar_init})(jQuery);