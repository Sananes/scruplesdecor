/* NM: Quick-view script */
(function(b){b.extend(b.nmTheme,{quickview_init:function(){var a=this,f=b("#nm-quickview"),c=b('<div id="nm-quickview-overlay" class="mfp-bg nm-mfp-fade-in"></div>'),g;a.$body.on("click",".nm-quickview-btn",function(d){d.preventDefault();if(g=b(this).data("product_id"))a.$html.css("width","auto"),c.appendTo(a.$body),c.addClass("show mfp-ready nm-loader"),k()});var k=function(){var d,h={product_id:g};"undefined"!==typeof wc_add_to_cart_params?d=wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",
"nm_ajax_load_product"):(d=nm_wp_vars.ajaxUrl,h.action="nm_ajax_load_product");window.nm_quickview_get_product=b.ajax({type:"POST",url:d,data:h,dataType:"html",cache:!1,headers:{"cache-control":"no-cache"},beforeSend:function(){"object"===typeof window.nm_quickview_get_product&&window.nm_quickview_get_product.abort()},error:function(b,d,e){console.log("NM: AJAX error - _qvLoadProduct() - "+e);a.$html.css("width","");c.removeClass("mfp-ready mfp-removing").remove()},success:function(c){f.html(c);var d=
f.children("#product-"+g),e=d.find("form.cart");b("#nm-quickview-slider").find("img").last().one("load",function(){d.hasClass("product-variable")&&(e.wc_variation_form().find(".variations select:eq(0)").change(),e.find("select").selectOrDie(a.shopSelectConfig),a.shopToggleVariationDetails(),e.on("found_variation",function(){a.shopToggleVariationDetails()}),e.on("woocommerce_variation_select_change",function(){a.qvHasSlider&&a.$qvSlider.slick("slickGoTo",0,!1)}));a.shopInitQuantity(b("#nm-qv-product-summary"));
l()})}})},l=function(){b.magnificPopup.open({mainClass:"nm-mfp-quickview nm-mfp-fade-in",closeMarkup:'<a class="mfp-close nm-font nm-font-close2"></a>',removalDelay:180,items:{src:f,type:"inline"},callbacks:{open:function(){c.removeClass("nm-loader");a.qvHasSlider=!1;a.$qvSlider=b("#nm-quickview-slider");1<a.$qvSlider.children().length&&(a.qvHasSlider=!0,a.$qvSlider.slick({prevArrow:'<a class="slick-prev"><i class="nm-font nm-font-play flip"></i></a>',nextArrow:'<a class="slick-next"><i class="nm-font nm-font-play"></i></a>',
dots:!1,infinite:!1,speed:350}));c.one("touchstart.qv",function(){b.magnificPopup.close()})},beforeClose:function(){c.addClass("mfp-removing")},close:function(){a.$html.css("width","");c.removeClass("mfp-ready mfp-removing").remove()}}})}}});b.nmThemeExtensions.quickview=b.nmTheme.quickview_init})(jQuery);